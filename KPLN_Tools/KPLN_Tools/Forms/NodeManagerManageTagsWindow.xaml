<Window x:Class="KPLN_Tools.Forms.NodeManagerManageTagsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="KPLN. Добавить/удалить теги"
        Height="400"
        Width="550"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        ShowInTaskbar="False">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- строка 1 -->
            <RowDefinition Height="*"/>
            <!-- строка 2 -->
            <RowDefinition Height="Auto"/>
            <!-- ОК/Отмена -->
        </Grid.RowDefinitions>

        <!-- СТРОКА 1: все теги + Добавить + Добавить свой -->
        <StackPanel Grid.Row="0" Margin="0,0,0,10">
            <TextBlock Text="Выберите тег из списка или добавьте новый:" Margin="0,0,0,4"/>
            <StackPanel Orientation="Horizontal">
                <ComboBox x:Name="AllTagsCombo"
                          Width="250"
                          ItemsSource="{Binding AllTags}"/>
                <Button Content="Добавить из списка"
                        Width="130"
                        Height="24"
                        Margin="8,0,0,0"
                        Click="AddTag_Click"/>
                <Button Content="Добавить свой"
                        Width="110"
                        Margin="8,0,0,0"
                        Click="AddCustomTag_Click"/>
            </StackPanel>
        </StackPanel>

        <!-- СТРОКА 2: текущие теги + удалить -->
        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0" Text="Теги узла:" Margin="0,0,0,4"/>

            <ListBox x:Name="CurrentTagsListBox"
                     Grid.Row="1"
                     ItemsSource="{Binding CurrentTags}"
                     SelectionMode="Extended"
                     MinHeight="80"/>

            <Button Grid.Row="2"
                    Content="Удалить выбранные"
                    Width="150"
                    Height="24"
                    HorizontalAlignment="Left"
                    Margin="0,6,0,0"
                    Click="DeleteTag_Click" Background="#FFFFB4B4"/>
        </Grid>

        <!-- СТРОКА 3: ОК / Отмена -->
        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,10,0,0">
            <Button Content="Отмена" Width="80" Margin="0,0,8,0" IsCancel="True"/>
            <Button Content="Применить" Width="80" Height="24" IsDefault="True" Click="Ok_Click" Background="#FFE3FFD4"/>
        </StackPanel>
    </Grid>
</Window>
