<Window
    x:Class="KPLN_ExtraFilter.Forms.SelectionByClickForm"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:KPLN_ExtraFilter.Forms"
    mc:Ignorable="d"
    WindowStyle="ToolWindow"
    WindowStartupLocation="CenterOwner"
    ResizeMode="NoResize"
    SizeToContent="WidthAndHeight"
    Topmost="True"
    FontFamily="Consolas, 'Segoe UI', monospace"
    Title="KPLN: Выбор похожих"
    Background="#2B2F38">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Styles.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <Grid>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="350" />
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <StackPanel
            DataContext="{Binding CurrentSelectionByClickM}">
            <Border 
                Style="{StaticResource RCTG}">
                <StackPanel>
                    <TextBlock 
                        Style="{StaticResource TXT}" 
                        Text="Что выбираем?"/>
                    <CheckBox
                        Style="{StaticResource CHB}"
                        IsChecked="{Binding What_SameCategory}" 
                        Content="Одинаковой категории" />
                    <CheckBox
                        Style="{StaticResource CHB}"
                        IsChecked="{Binding What_SameFamily}" 
                        Content="Одинакового семейства" />
                    <CheckBox
                        Style="{StaticResource CHB}"
                        IsChecked="{Binding What_SameType}" 
                        Content="Одинакового типа" />
                    <CheckBox
                        Style="{StaticResource CHB}"
                        IsChecked="{Binding What_Workset}" 
                        IsEnabled="{Binding IsWorkshared}" 
                        Content="Одного рабочего набора" />
                    <CheckBox
                        Style="{StaticResource CHB}"
                        IsChecked="{Binding What_ParameterData}"
                        Checked="CHB_WhatParamData_Checked">
                        <TextBlock 
                            Text="Одинакового значения пар-ра" 
                            TextWrapping="Wrap" />
                    </CheckBox>
                    <ComboBox
                        Name="CB_FilterParams"
                        Style="{StaticResource CBX}"
                        ItemsSource="{Binding FilteredParamsView}"
                        SelectedItem="{Binding What_SelectedParam}"
                        HorizontalAlignment="Stretch"
                        IsEditable="True"
                        IsEnabled="{Binding What_ParameterData}"
                        TextSearch.TextPath="CurrentParamName">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock 
                                    Text="{Binding CurrentParamName}"
                                    Style="{StaticResource TXT}"
                                    Foreground ="Black"
                                    FontSize ="12"
                                    Margin="5,0,0,5"/>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                </StackPanel>
            </Border>

            <Border 
                Style="{StaticResource RCTG}">
                <StackPanel>
                    <TextBlock 
                        Style="{StaticResource TXT}" 
                        Text="Где выбираем?" />
                    <RadioButton 
                        Style="{StaticResource RB}" 
                        GroupName="WhereSelection" 
                        IsChecked="{Binding Where_CurrentView, 
                            UpdateSourceTrigger=PropertyChanged}" 
                        Content="Текущий вид" />
                    <RadioButton 
                        Style="{StaticResource RB}" 
                        GroupName="WhereSelection" 
                        IsChecked="{Binding Where_Model, 
                            UpdateSourceTrigger=PropertyChanged}" 
                        Content="Модель" />
                </StackPanel>
            </Border>

            <Border 
                Style="{StaticResource RCTG}">
                <StackPanel>
                    <TextBlock 
                        Style="{StaticResource TXT}" 
                        Text="Исключения?" />
                    <CheckBox 
                        Style="{StaticResource CHB}" 
                        IsChecked="{Binding Belong_Group, 
                            UpdateSourceTrigger=PropertyChanged}" 
                        Content="Эл-ты групп" />
                </StackPanel>
            </Border>
        </StackPanel>

        <StackPanel
            Grid.Row="4">
            <!--Подсказка-->
            <TextBlock
                Style="{StaticResource TXT}"
                FontSize="10"
                Foreground="Red"
                Text="{Binding CurrentSelectionByClickM.UserHelp}"/>

            <!-- Кнопки -->
            <DockPanel 
                LastChildFill="False" 
                HorizontalAlignment="Center"
                Height="35">
                <Button 
                    x:Name="RunBtn" 
                    Width="150" 
                    Style="{StaticResource BTN}" 
                    Content="Выбрать" 
                    IsEnabled="{Binding CurrentSelectionByClickM.CanRun}" 
                    Command="{Binding RunSelectionCmd}" 
                    CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}"
                    ToolTip="Выбрать элементы согласно конфигурации" />
                <Button 
                    x:Name="CleareConfigBtn" 
                    Width="150"
                    Style="{StaticResource BTN}" 
                    Content="Сбросить" 
                    Command="{Binding DropSelectionCmd}"  
                    ToolTip="Сбросить конфигурацию запуска до значений по умолчанию" />
            </DockPanel>
        </StackPanel>
    </Grid>
</Window>